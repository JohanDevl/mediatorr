<div class="page-media-detail">
  <script>
    window.__MEDIA_TYPE__ = '{{MEDIA_TYPE}}';
    window.__MEDIA_NAME__ = '{{MEDIA_NAME}}';
  </script>

  <!-- Breadcrumb -->
  <div class="breadcrumb">
    <a href="/">Dashboard</a> /
    <a href="/media/{{MEDIA_TYPE}}">{{MEDIA_TYPE}}</a> /
    <span>{{MEDIA_NAME}}</span>
  </div>

  <!-- Header with actions -->
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-xl); gap: var(--spacing-lg); flex-wrap: wrap;">
    <h2 id="detail-title" style="margin: 0; font-size: 28px;">{{MEDIA_NAME}}</h2>
    <div style="display: flex; gap: var(--spacing-md); flex-wrap: wrap;">
      <button class="btn btn-primary" id="btn-regenerate">Regenerer</button>
      <button class="btn btn-danger" id="btn-delete">Supprimer artefacts</button>
    </div>
  </div>

  <!-- Metadata Panel (from TMDb/iTunes cache) -->
  <div class="card" id="metadata-panel" style="margin-bottom: var(--spacing-xl);">
    <h3 style="margin-top: 0; margin-bottom: var(--spacing-lg);">Metadata</h3>
    <div id="metadata-content">
      <div class="empty-state" style="min-height: 200px;">
        <div class="spinner spinner-lg"></div>
      </div>
    </div>
  </div>

  <!-- TMDb ID Override Panel (films/series only) -->
  <div class="card" id="override-panel" style="margin-bottom: var(--spacing-xl); display: none;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-lg); flex-wrap: wrap; gap: var(--spacing-md);">
      <h3 style="margin: 0;">ID TMDb</h3>
      <div id="override-badge"></div>
    </div>
    <div id="override-content">
      <div style="display: flex; gap: var(--spacing-md); align-items: center; flex-wrap: wrap;">
        <div style="display: flex; align-items: center; gap: var(--spacing-sm); flex: 1; min-width: 200px;">
          <label for="override-input" style="font-size: 13px; color: var(--text-secondary); white-space: nowrap;">TMDb ID :</label>
          <input type="number" id="override-input" min="1" placeholder="Ex: 603" style="flex: 1; padding: 6px 10px; border: 1px solid var(--border); border-radius: var(--radius-md); background: var(--bg-primary); color: var(--text-primary); font-size: 13px;">
        </div>
        <div style="display: flex; gap: var(--spacing-sm);">
          <button class="btn btn-primary btn-small" id="btn-set-override">Appliquer</button>
          <button class="btn btn-secondary btn-small" id="btn-clear-override" style="display: none;">Retirer</button>
          <a id="tmdb-link" href="#" target="_blank" rel="noopener" class="btn btn-secondary btn-small" style="display: none; text-decoration: none;">Voir sur TMDb</a>
        </div>
      </div>
    </div>
  </div>

  <!-- File Viewer with Tabs -->
  <div class="card" style="margin-bottom: var(--spacing-xl);">
    <h3 style="margin-top: 0; margin-bottom: var(--spacing-lg);">Fichiers</h3>
    <div class="tabs" id="file-tabs"></div>
    <div class="pre-viewer" id="file-viewer">
      <div class="empty-state" style="min-height: 300px;">
        <div class="empty-state-title">Selectionnez un fichier</div>
      </div>
    </div>
  </div>

  <!-- Source Info -->
  <div class="card" id="source-info">
    <h3 style="margin-top: 0;">Source</h3>
    <div id="source-content" style="font-family: var(--font-mono); font-size: 13px; color: var(--text-secondary);">-</div>
  </div>
</div>
